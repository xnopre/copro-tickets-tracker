#!/bin/sh

# Formater le code avec Prettier
npx lint-staged

# R√©cup√©rer le nom de la branche actuelle
BRANCH=$(git symbolic-ref --short HEAD 2>/dev/null)

# V√©rifier si on est sur main
if [ "$BRANCH" = "main" ]; then
  echo ""
  echo "‚ùå ERREUR : Commits directs sur 'main' sont interdits !"
  echo ""
  echo "Pour cr√©er une nouvelle fonctionnalit√© :"
  echo "  git checkout -b feature/nom-de-la-feature"
  echo ""
  echo "Pour revenir √† votre derni√®re branche :"
  echo "  git checkout -"
  echo ""
  echo "üìñ Voir le workflow complet dans PLAN.md (√âtape 2)"
  echo ""
  exit 1
fi

# Si on n'est pas sur main, laisser passer
exit 0
