# Étape 8 : Modifier un Ticket

**Objectif** : Permettre de modifier le titre et la description d'un ticket

## Ce qu'on livre

- Bouton "Modifier" dans la page de détail
- Formulaire de modification pré-rempli
- Sauvegarde des modifications
- Architecture hexagonale respectée
- Tests unitaires complets (310 tests au total)

## Tâches

- [x] Modifier l'interface `UpdateTicketData` (rendre tous les champs optionnels)
- [x] Étendre la route API `PATCH /api/tickets/[id]` pour accepter title/description
- [x] Enrichir le use case `UpdateTicket` avec validation
- [x] Créer le composant `EditTicketForm` avec tests (19 tests)
- [x] Ajouter un mode "édition" dans la page de détail (toggle view ⇄ edit)
- [x] Valider les modifications (client + serveur)
- [x] Afficher un message de confirmation
- [x] Tests complets (310 tests passants)
- [x] Type-check et build réussis
- [ ] Déployer

## Validation

- ✅ Le bouton "Modifier" affiche le formulaire
- ✅ Les champs sont pré-remplis
- ✅ Les modifications sont sauvegardées
- ✅ On peut annuler l'édition
- ✅ Validation title : requis, max 200 caractères
- ✅ Validation description : requise, max 5000 caractères
- ✅ Architecture hexagonale respectée
- ✅ Tous les tests passent (310/310)
- ✅ Type-check sans erreur
- ✅ Build Next.js réussi
- ⏳ Déployé en production (en attente)

## Notes techniques

**Architecture hexagonale** :

- Interface `UpdateTicketData` étendue avec champs optionnels (title, description, status, assignedTo)
- Use case `UpdateTicket` enrichi avec validation (même logique que CreateTicket)
- Route API `PATCH /api/tickets/[id]` étendue pour partial updates
- Composants : `EditTicketForm`, `TicketDetailsWithUpdate` avec mode toggle

**Nouveaux fichiers créés** :

- `src/presentation/components/EditTicketForm.tsx` (formulaire d'édition)
- `src/presentation/components/EditTicketForm.test.tsx` (19 tests)

**Fichiers modifiés** :

- `src/domain/entities/Ticket.ts` (UpdateTicketData)
- `src/domain/use-cases/UpdateTicket.ts` (validation)
- `src/domain/use-cases/UpdateTicket.test.ts` (13 tests)
- `app/api/tickets/[id]/route.ts` (PATCH étendu)
- `app/api/tickets/[id]/route.test.ts` (16 tests pour PATCH)
- `src/presentation/components/TicketDetail.tsx` (bouton Modifier)
- `src/presentation/components/TicketDetail.test.tsx` (+4 tests pour bouton Modifier)
- `src/presentation/components/TicketDetailsWithUpdate.tsx` (mode toggle)
- `src/presentation/components/TicketDetailsWithUpdate.test.tsx` (+5 tests pour mode toggle)

**Tests** : +57 nouveaux tests (de 253 à 310)
